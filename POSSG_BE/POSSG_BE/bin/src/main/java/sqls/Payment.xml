<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="possg.com.a.dao.PaymentDao">	<!-- 초기설정 -->
	
	<!-- 카카오 결제 정보 추가 -->
    <insert id="addkakaopayment" parameterType="possg.com.a.dto.PaymentDto">
        INSERT INTO Payment (
            receipt_id, user_seq, product_seq, pg, method, discount_info, 
            price, count, purchased_at, receipt_url, ref, card_num, del
        )
        VALUES (
            #{receiptId}, #{userSeq}, #{productSeq}, #{pg}, #{method}, #{discountInfo}, 
            #{price}, #{count}, #{purchasedAt}, #{receiptUrl}, #{ref}, #{cardNum}, 0
        )
    </insert>
    
    <!-- 카카오 결제 취소 -->
    <update id="cancelkakaopayment" parameterType="java.lang.String">
    	UPDATE Payment
    	SET del = 1
    	where payment_seq = #{paymentSeq}
    </update>
</mapper>